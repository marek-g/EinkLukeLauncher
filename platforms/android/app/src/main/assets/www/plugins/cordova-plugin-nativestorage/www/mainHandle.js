cordova.define("cordova-plugin-nativestorage.mainHandle",function(require,exports,module){var inBrowser=!1,NativeStorageError=require("./NativeStorageError");function StorageHandle(){switch(this.storageSupport=(inBrowser=window.cordova&&("browser"===window.cordova.platformId||"osx"===window.cordova.platformId)||!(window.phonegap||window.cordova))?window.localStorage?1:2:0,this.storageSupport){case 0:var exec=require("cordova/exec");this.storageHandlerDelegate=exec;break;case 1:var localStorageHandle=require("./LocalStorageHandle");this.storageHandlerDelegate=localStorageHandle}}StorageHandle.prototype.initWithSuiteName=function(suiteName,success,error){null!==suiteName?this.storageHandlerDelegate(success,error,"NativeStorage","initWithSuiteName",[suiteName]):error("Null suiteName isn't supported")},StorageHandle.prototype.set=function(reference,value,success,error){if(error=error||function(){},null!==reference)if(null!==value)switch(typeof value){case"undefined":error("an undefined type isn't supported");break;case"boolean":this.putBoolean(reference,value,success,error);break;case"number":value===+value?value===(0|value)?this.putInt(reference,value,success,error):value!==(0|value)&&this.putDouble(reference,value,success,error):error("The value doesn't seem to be a number");break;case"string":this.putString(reference,value,success,error);break;case"object":this.putObject(reference,value,success,error);break;default:error("The type isn't supported or isn't been recognized")}else error("a Null value isn't supported");else error("The reference can't be null")},StorageHandle.prototype.remove=function(reference,success,error){if(error=error||function(){},null!==reference)if(inBrowser)try{localStorage.removeItem(reference),success()}catch(e){error(e)}else this.storageHandlerDelegate(success,error,"NativeStorage","remove",[reference]);else error("Null reference isn't supported")},StorageHandle.prototype.clear=function(success,error){if(error=error||function(){},inBrowser)try{localStorage.clear(),success()}catch(e){error(e)}else this.storageHandlerDelegate(success,error,"NativeStorage","clear",[])},StorageHandle.prototype.putBoolean=function(reference,aBoolean,success,error){error=error||function(){},null!==reference?null!==aBoolean?"boolean"==typeof aBoolean?this.storageHandlerDelegate(function(returnedBool){"string"==typeof returnedBool?"true"===returnedBool?success(!0):"false"===returnedBool?success(!1):error("The returned boolean from SharedPreferences was not recognized: "+returnedBool):success(returnedBool)},error,"NativeStorage","putBoolean",[reference,aBoolean]):error("Only boolean types are supported"):error("a Null value isn't supported"):error("Null reference isn't supported")},StorageHandle.prototype.getBoolean=function(reference,success,error){error=error||function(){},null!==reference?this.storageHandlerDelegate(function(returnedBool){"string"==typeof returnedBool?"true"===returnedBool?success(!0):"false"===returnedBool?success(!1):error("The returned boolean from SharedPreferences was not recognized: "+returnedBool):success(returnedBool)},error,"NativeStorage","getBoolean",[reference]):error("Null reference isn't supported")},StorageHandle.prototype.putInt=function(reference,anInt,success,error){error=error||function(){},null!==reference?this.storageHandlerDelegate(success,error,"NativeStorage","putInt",[reference,anInt]):error("Null reference isn't supported")},StorageHandle.prototype.getInt=function(reference,success,error){error=error||function(){},null!==reference?this.storageHandlerDelegate(success,error,"NativeStorage","getInt",[reference]):error("Null reference isn't supported")},StorageHandle.prototype.putDouble=function(reference,aFloat,success,error){error=error||function(){},null!==reference?this.storageHandlerDelegate(success,error,"NativeStorage","putDouble",[reference,aFloat]):error("Null reference isn't supported")},StorageHandle.prototype.getDouble=function(reference,success,error){error=error||function(){},null!==reference?this.storageHandlerDelegate(function(data){isNaN(data)?error("Expected double but got non-number"):success(parseFloat(data))},error,"NativeStorage","getDouble",[reference]):error("Null reference isn't supported")},StorageHandle.prototype.putString=function(reference,s,success,error){error=error||function(){},null!==reference?this.storageHandlerDelegate(success,error,"NativeStorage","putString",[reference,s]):error("Null reference isn't supported")},StorageHandle.prototype.getString=function(reference,success,error){error=error||function(){},null!==reference?this.storageHandlerDelegate(success,error,"NativeStorage","getString",[reference]):error("Null reference isn't supported")},StorageHandle.prototype.putObject=function(reference,obj,success,error){error=error||function(){};var objAsString="";try{objAsString=JSON.stringify(obj)}catch(err){error(err)}this.putString(reference,objAsString,function(data){var obj={};try{obj=JSON.parse(data),success(obj)}catch(err){error(err)}},error)},StorageHandle.prototype.getObject=function(reference,success,error){error=error||function(){},this.getString(reference,function(data){var obj={};try{obj=JSON.parse(data),success(obj)}catch(err){error(err)}},error)},StorageHandle.prototype.setItem=function(reference,obj,success,error){error=error||function(){};var objAsString="";try{objAsString=JSON.stringify(obj)}catch(err){return void error(new NativeStorageError(NativeStorageError.JSON_ERROR,"JS",err))}null!==reference?this.storageHandlerDelegate(function(data){try{obj=JSON.parse(data),success(obj)}catch(err){error(new NativeStorageError(NativeStorageError.JSON_ERROR,"JS",err))}},function(code){error(new NativeStorageError(code,"Native",""))},"NativeStorage","setItem",[reference,objAsString]):error(new NativeStorageError(NativeStorageError.NULL_REFERENCE,"JS",""))},StorageHandle.prototype.getItem=function(reference,success,error){if(error=error||function(){},null!==reference){var obj={};this.storageHandlerDelegate(function(data){try{obj=JSON.parse(data),success(obj)}catch(err){error(new NativeStorageError(NativeStorageError.JSON_ERROR,"JS",err))}},function(code){error(new NativeStorageError(code,"Native",""))},"NativeStorage","getItem",[reference])}else error(new NativeStorageError(NativeStorageError.NULL_REFERENCE,"JS",""))},StorageHandle.prototype.setSecretItem=function(reference,obj,encryptConfig,success,error){error=error||function(){};var objAsString="";try{objAsString=JSON.stringify(obj)}catch(err){return void error(new NativeStorageError(NativeStorageError.JSON_ERROR,"JS",err))}if(null!==reference){var action="setItem",params=[reference,objAsString];switch(encryptConfig.mode){case"password":action="setItemWithPassword",params=[reference,objAsString,encryptConfig.value];break;case"key":action="setItemWithKey";break;case"none":break;default:return void error(new NativeStorageError(NativeStorageError.WRONG_PARAMETER,"JS",""))}this.storageHandlerDelegate(function(data){try{obj=JSON.parse(data),success(obj)}catch(err){error(new NativeStorageError(NativeStorageError.JSON_ERROR,"JS",err))}},function(code){error(new NativeStorageError(code,"Native",""))},"NativeStorage",action,params)}else error(new NativeStorageError(NativeStorageError.NULL_REFERENCE,"JS",""))},StorageHandle.prototype.getSecretItem=function(reference,encryptConfig,success,error){if(error=error||function(){},null!==reference){var obj={},action="getItem",params=[reference];switch(encryptConfig.mode){case"password":action="getItemWithPassword",params=[reference,encryptConfig.value];break;case"key":action="getItemWithKey";break;case"none":break;default:return void error(new NativeStorageError(NativeStorageError.WRONG_PARAMETER,"JS",""))}this.storageHandlerDelegate(function(data){try{obj=JSON.parse(data),success(obj)}catch(err){error(new NativeStorageError(NativeStorageError.JSON_ERROR,"JS",err))}},function(code){error(new NativeStorageError(code,"Native",""))},"NativeStorage",action,params)}else error(new NativeStorageError(NativeStorageError.NULL_REFERENCE,"JS",""))},StorageHandle.prototype.keys=function(success,error){error=error||function(){},this.storageHandlerDelegate(success,error,"NativeStorage","keys",[])};var storageHandle=new StorageHandle;module.exports=storageHandle});